pipeline {
    agent any
    scm {
        git {
            remote {
                url("https://github.com/riteshmandlik/sample-java-repository")
                credentials("RITESH_TOKEN")
            }
            branch('master')
            extensions {
                localBranch('master')
            }
        }
    }
    stages {
        stage('test') {
            steps {
                shell('''
                    #!/bin/bash
                    mvn -B -D${USER} -D${PASS} -f ./test clean release:clean release:prepare release:perform -DlocalCheckout=true -DdryRun=false -Dscm.user=${USER} -dscm.pass=${PASS}
                    ''')
                }
            }
        }
    }
